<!doctype html>
<html>
<head>
<style>
*{ margin:0; padding:0;  }
#box{ width:300px; height:300px; border:1px solid #F93; margin:100px auto; position:relative; }
#box ul{ width:300px; height:300px; position:relative;
 }
li{ list-style:none; }
input { position:absolute; left:-20px; }
#box li{ width:140px; height:140px; float:left; margin:5px; background:#0F9;  }
#box .a_all{ position:absolute; right:0; bottom:0; width:30px; height:30px; background:#CCC; z-index:10; }
#p{ width:300px; height:30px; line-height:30px; position:absolute; top:-30px; left:0;  }
#box ul .active{ background:#F60; }

</style>

<meta charset="utf-8">

<script>
window.onload=function()
{
	var oBox=document.getElementById('box');
	var oUl=oBox.getElementsByTagName('ul')[0];
	var oP=document.getElementById('p');
	var aLi=oUl.children;
	//var bKg=false;
	for(var i=0; i<aLi.length; i++)
	{
		/*aLi[i].onmouseover=function()
		{
			for(var i=0; i<aLi.length; i++)
			{
				aLi[i].className='';
			}
			this.className='active';
			
		}
		var n=0;*/
		
		var oChe=oBox.getElementsByTagName('input')[0];
		oChe.onclick=function()
		{
			if(this.checked)
			{
				for(var i=0; i<aLi.length; i++)
				{
					aLi[i].className='active';
					aLi[i].bKg=true;
				}
				
				oP.innerHTML='已选中'+aLi.length+'款'
			}else
			{
				for(var i=0; i<aLi.length; i++)
				{
					aLi[i].className='';
					aLi[i].bKg=false;
				}
				oP.innerHTML='已选中0款'
			}
		}
	
	for(var i=0; i<aLi.length; i++)
	{
			aLi[i].bKg=false;
			aLi[i].onclick=function()
				{
					if(this.bKg)
					{
						this.className='';
						aLi[i]--;
					}else
					{
						aLi[i]++;
						this.className='active';
						
					}
					
				}
			}
	}
	
}
</script>

<title>无标题文档</title>
</head>

<body>
<div id="box">
		<input type="checkbox" >
		<p id="p">已选中0款</p>
		<a href="javascript:;" class="a_all"></a>
		<ul>
        	<li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
</div>
</body>
</html>
